cargo_doc:
    image: rust:1.57-buster
    stage: build
    variables:
      ONLY_LIB: 'false'
      PROJECT_ROOT: '.'
      RELEASE_MODE: 'true'
      OUTPUT_FOLDER: "website_build"
      ADDITIONAL_OPTIONS: ''
    script:
      - cd $PROJECT_ROOT
      - if [ ${ONLY_LIB} == "true" ]; then
      -   ADDITIONAL_OPTIONS+=" --lib"
      - fi
      - if [ ${RELEASE_MODE} == "true" ]; then
      -   ADDITIONAL_OPTIONS+=" --release"
      - fi
      - cargo doc --target-dir ${OUTPUT_FOLDER} $ADDITIONAL_OPTIONS
    artifacts:
      when: always
      expose_as: "Cargo_doc build"
      paths:
        - $OUTPUT_FOLDER

