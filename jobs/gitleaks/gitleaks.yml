stages:
  - static_tests

# From https://github.com/pmarlow/ci_secrets/blob/master/example.gitlab-ci.yml

gitleaks:
  image:
    name: zricethezav/gitleaks:v6.1.2
    entrypoint: [""]
  stage: static_tests
  script:
    - if [ ! -z ${CI_MERGE_REQUEST_ID} ]; then
    -   gitleaks --since origin/$CI_MERGE_REQUEST_TARGET_BRANCH_NAME --log INFO
    - else
    -   gitleaks --since $CI_COMMIT_BEFORE_SHA --log INFO
    - fi
